<div class="container-fluid">
  <div class="d-flex justify-content-end">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="showAllIncidents" [(ngModel)]="showAllIncidents">
      <label class="form-check-label" for="showAllIncidents">
        Show All incidents
      </label>
    </div>

    <button class='btn btn-secondary m-1' routerLink='/incidents/add'>
      <i class="fas fa-plus"></i>
    </button>
<!--    <a routerLink='/incidents/add'>-->
<!--      <i class="fas fa-plus"></i>-->
<!--    </a>-->
  </div>
  <div class="d-flex">
    <div class="col-9 p-2">
      <div *ngFor='let incident of incidents'>
        <ng-container *ngIf="showAllIncidents || (incident.status !== 'closed')">
          <div class="card m-1 p-1 bg-light">
            <div class="d-flex justify-content-between">
              <div>
                <span class="label">ID</span><span class="ml-2">{{incident.uid}}</span>
                <span class="label ml-4">Updated At</span><span class="ml-2">{{incident.updatedAt | date : 'fullDate'}}</span>
              </div>
    <!--          <button class='btn btn-secondary' [routerLink]="'/incidents/edit/' + incident._id" [state]="{incident: incident}">-->
    <!--            <i class="fas fa-edit"></i>-->
    <!--          </button>-->
              <a *ngIf="incident.status !== 'closed'" [routerLink]="'/incidents/edit/' + incident.id" [state]="{incident: incident}">
                <i class="fas fa-edit"></i>
              </a>
            </div>

            <div class="d-flex">
              <div><span class="label">Name</span><span class="ml-2">{{incident.customerInfo.displayName}}</span></div>
              <div><span class="label ml-2">Email</span><span class="ml-2">{{incident.customerInfo.email}}</span></div>
            </div>

            <div class="d-flex">
              <div><span class="label">Status</span><span class="ml-2">{{incident.status}}</span></div>
              <div><span class="label ml-2">Priority</span><span class="ml-2">{{incident.priority}}</span></div>
            </div>
            <div class="d-flex flex-column">
              <div class="label">Description</div>
              <div>{{incident.description}}</div>
            </div>

            <div class="d-flex flex-column">
              <div class="label">Narrative</div>
              <div>{{incident.narrative}}</div>
            </div>

            <div class="d-flex flex-column" *ngIf="incident.status === 'closed'">
              <div class="label">Resolution</div>
              <div>{{incident.narrative}}</div>
            </div>

          </div>
        </ng-container>
      </div>

<!--      <div class="form-inline float-left mr-1">-->
<!--        <select class="form-control" [value]='booksPerPage'-->
<!--                (change)='changePageSize($event.target.value)'>-->
<!--          <option value="3">3 per Page</option>-->
<!--          <option value="4">4 per Page</option>-->
<!--          <option value="6">6 per Page</option>-->
<!--          <option value="8">8 per Page</option>-->
<!--        </select>-->
<!--      </div>-->

<!--      <div class="btn-group float-right">-->
<!--        <button *counter='let page of pageCount' (click)='changePage(page)'-->
<!--                class="btn btn-outline-primary"-->
<!--                [class.active]='page == selectedPage'>-->
<!--          {{ page }}-->
<!--        </button>-->
<!--      </div>-->

    </div>

  </div>
</div>
